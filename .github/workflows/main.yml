name: TITAN-V213-AUTO-WATCHTIME-SEARCH

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: 1. Setup User & Mobile View
        run: |
          $Password = ConvertTo-SecureString "Admin@Watch786" -AsPlainText -Force
          net user RDP Admin@Watch786 /add /expires:never
          net localgroup Administrators RDP /add
          # Mobile Friendly Screen (800x600)
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -Name "DefaultDestinationHeight" -Value 600
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -Name "DefaultDestinationWidth" -Value 800
          net start audiosrv

      - name: 2. Install Automation Frameworks
        run: |
          choco install googlechrome cloudflared python vcredist140 -y
          pip install pyautogui requests --quiet

      - name: 3. Download "Jugad" Tools (BAS & Search Helper)
        shell: powershell
        run: |
          # Browser Automation Studio (BAS) - The License-Free Master
          Invoke-WebRequest -Uri "https://bablosoft.com/distr/BrowserAutomationStudio/BrowserAutomationStudioInstall.exe" -OutFile "C:\Users\Public\Desktop\BAS_Pro_Installer.exe"
          
          # Auto-Search Instruction Script (Jugad)
          $script = @"
          STEP 1: Open BAS (Browser Automation Studio).
          STEP 2: Use the 'YouTube Search' function.
          STEP 3: Input your Keyword: 'Your Video Title'.
          STEP 4: Set Threads to 50.
          STEP 5: Load Proxies from 'Proxies_List.txt' on Desktop.
          RESULT: Non-Drop Watch Time Guaranteed.
          "@
          $script | Out-File -FilePath "C:\Users\Public\Desktop\READ_ME_JUGAD.txt" -Encoding ascii

      - name: 4. Fetch 50+ Premium Proxies
        shell: powershell
        run: |
          $proxyPy = "import requests`nr = requests.get('https://api.proxyscrape.com/v2/?request=displayproxies&protocol=http')`nwith open('C:\\Users\\Public\\Desktop\\Proxies_List.txt', 'w') as f: f.write(r.text)"
          python -c "$proxyPy"

      - name: 5. Direct Link for Mobile Connection
        shell: powershell
        run: |
          Write-Host "--- COPY THIS LINK FOR MOBILE ---" -ForegroundColor Cyan
          Start-Process cloudflared -ArgumentList "tunnel --url rdp://localhost:3389" -RedirectStandardOutput "C:\Users\Public\Desktop\address.log"
          Start-Sleep -Seconds 30
          Get-Content "C:\Users\Public\Desktop\address.log" | Select-String "trycloudflare.com"

      - name: 6. Ghost Anti-Sleep Logic
        run: |
          $bot = "import pyautogui, time, random`nwhile True:`n pyautogui.press('shift')`n pyautogui.moveRel(random.randint(-5,5), random.randint(-5,5))`n time.sleep(30)"
          $bot | Out-File -FilePath "C:\Users\Public\Desktop\KEEP_ALIVE.py" -Encoding ascii
          Start-Process python -ArgumentList "C:\Users\Public\Desktop\KEEP_ALIVE.py"

      - name: 7. 9-Hour Non-Stop Session
        run: Start-Sleep -Seconds 32400
