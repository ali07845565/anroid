name: TITAN-V210-GHOST-WATCHTIME-PRO

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: 1. System Stealth & Mobile Setup
        run: |
          $Password = ConvertTo-SecureString "Admin@Watch786" -AsPlainText -Force
          net user RDP Admin@Watch786 /add /expires:never
          net localgroup Administrators RDP /add
          # Mobile friendly view
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -Name "DefaultDestinationHeight" -Value 600
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -Name "DefaultDestinationWidth" -Value 800
          # Disable Windows Defender to save CPU for 50 tabs
          Set-MpPreference -DisableRealtimeMonitoring $true

      - name: 2. Install Epic Bot & Ghost Tools
        run: |
          choco install googlechrome cloudflared python vcredist140 -y --no-progress
          pip install pyautogui requests --quiet
          Invoke-WebRequest -Uri "https://cdn.epicbot.com/EpicBotSetup.exe" -OutFile "C:\Users\Public\Desktop\EpicBot_Pro_Setup.exe"

      - name: 3. Advanced 50-Profile Ghost Script
        shell: powershell
        run: |
          $ghostScript = @"
          import os, time, pyautogui
          
          def start_ghost_tabs():
              # YouTube ko dhoka dene ke liye unique flags
              flags = '--window-size=300,200 --mute-audio --disable-gpu --disable-software-rasterizer --disable-dev-shm-usage'
              for i in range(1, 51):
                  profile = f"C:\\Users\\Public\\Ghost{i}"
                  # Har tab alag position par khulega (Tiling)
                  x = (i % 5) * 150
                  y = (i // 5) * 100
                  os.system(f'start chrome {flags} --user-data-dir="{profile}" --window-position={x},{y} "https://www.youtube.com"')
                  print(f"Ghost Tab {i} Launched")
                  time.sleep(2) # Sudden load se bachne ke liye delay

          if __name__ == "__main__":
              time.sleep(10)
              start_ghost_tabs()
              while True:
                  pyautogui.press('shift')
                  time.sleep(30)
          "@
          $ghostScript | Out-File -FilePath "C:\Users\Public\Desktop\GHOST_BOT.py" -Encoding ascii
          "@echo off`npython C:\Users\Public\Desktop\GHOST_BOT.py" | Out-File -FilePath "C:\Users\Public\Desktop\RUN_GHOST_50_TABS.bat" -Encoding ascii

      - name: 4. Direct IP-Link & Proxy Fetcher
        shell: powershell
        run: |
          # Fresh Proxies for Epic Bot
          $proxyPy = "import requests`nr = requests.get('https://api.proxyscrape.com/v2/?request=displayproxies&protocol=http')`nwith open('C:\\Users\\Public\\Desktop\\Proxies.txt', 'w') as f: f.write(r.text)"
          python -c "$proxyPy"
          
          Write-Host "--- RDP LINK FOR MOBILE ---" -ForegroundColor Cyan
          Start-Process cloudflared -ArgumentList "tunnel --url rdp://localhost:3389" -RedirectStandardOutput "C:\Users\Public\Desktop\address.log"
          Start-Sleep -Seconds 30
          Get-Content "C:\Users\Public\Desktop\address.log" | Select-String "trycloudflare.com"

      - name: 5. Stay Alive (9 Hours)
        run: Start-Sleep -Seconds 32400
